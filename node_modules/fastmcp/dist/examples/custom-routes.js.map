{"version":3,"sources":["../../src/examples/custom-routes.ts"],"sourcesContent":["#!/usr/bin/env node\n\n/**\n * Example FastMCP server demonstrating custom HTTP routes using Hono's native API.\n *\n * This example shows how to:\n * - Use getApp() to access Hono's native API\n * - Add REST API endpoints with Hono's standard methods (app.get(), app.post(), etc.)\n * - Implement authentication with a custom helper function\n * - Handle file uploads\n * - Serve admin interfaces\n * - Create webhooks\n * - OAuth discovery endpoints\n * - Integrate custom routes with MCP tools\n *\n * Run with:\n *   npx fastmcp dev src/examples/custom-routes.ts\n *   npx fastmcp inspect src/examples/custom-routes.ts\n *\n * Or directly:\n *   node dist/examples/custom-routes.js --transport=http-stream --port=8080\n */\n\nimport type { Context } from \"hono\";\n\nimport { z } from \"zod\";\n\nimport { FastMCP } from \"../FastMCP.js\";\n\n// Example in-memory data store\ninterface User {\n  email: string;\n  id: string;\n  name: string;\n}\n\nconst users = new Map<string, User>([\n  [\"1\", { email: \"alice@example.com\", id: \"1\", name: \"Alice\" }],\n  [\"2\", { email: \"bob@example.com\", id: \"2\", name: \"Bob\" }],\n]);\n\nlet requestCount = 0;\n\n// Simple authentication for demonstration\ninterface UserAuth {\n  [key: string]: unknown;\n  role: string;\n  userId: string;\n}\n\n// Create the FastMCP server with authentication\nconst server = new FastMCP<UserAuth>({\n  // Simple authentication - in production, use proper tokens/JWTs\n  authenticate: async (req) => {\n    const authHeader = req.headers.authorization;\n    if (authHeader === \"Bearer admin-token\") {\n      return { role: \"admin\", userId: \"admin\" };\n    } else if (authHeader === \"Bearer user-token\") {\n      return { role: \"user\", userId: \"user1\" };\n    }\n    throw new Error(\"Invalid or missing authentication\");\n  },\n  name: \"custom-routes-example\",\n  version: \"1.0.0\",\n});\n\n// Get the Hono app instance for direct access to Hono's native API\nconst app = server.getApp();\n\n// Helper to get authentication from Node.js request\nconst getAuth = async (c: Context): Promise<null | UserAuth> => {\n  const req = c.env.incoming;\n  const authHeader = req.headers.authorization;\n  if (authHeader === \"Bearer admin-token\") {\n    return { role: \"admin\", userId: \"admin\" };\n  } else if (authHeader === \"Bearer user-token\") {\n    return { role: \"user\", userId: \"user1\" };\n  }\n  return null;\n};\n\n// ===== PUBLIC ROUTES (No Authentication Required) =====\n\n// OAuth discovery endpoint - public by design\napp.get(\"/.well-known/openid-configuration\", async (c) => {\n  return c.json({\n    authorization_endpoint: \"https://example.com/oauth/authorize\",\n    issuer: \"https://example.com\",\n    jwks_uri: \"https://example.com/.well-known/jwks.json\",\n    response_types_supported: [\"code\"],\n    scopes_supported: [\"openid\", \"profile\", \"email\"],\n    subject_types_supported: [\"public\"],\n    token_endpoint: \"https://example.com/oauth/token\",\n  });\n});\n\n// OAuth protected resource metadata - also public\napp.get(\"/.well-known/oauth-protected-resource\", async (c) => {\n  return c.json({\n    authorizationServers: [\"https://example.com\"],\n    resource: \"https://example.com/api\",\n    scopesSupported: [\"read\", \"write\"],\n  });\n});\n\n// Public status endpoint - no auth needed\napp.get(\"/status\", async (c) => {\n  return c.json({\n    message: \"Server is running\",\n    status: \"healthy\",\n    timestamp: new Date().toISOString(),\n    version: \"1.0.0\",\n  });\n});\n\n// Public documentation endpoint\napp.get(\"/docs\", async (c) => {\n  const html = `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>API Documentation</title>\n      <style>\n        body { font-family: sans-serif; margin: 40px; line-height: 1.6; }\n        h1, h2 { color: #333; }\n        .endpoint { background: #f8f9fa; padding: 15px; margin: 10px 0; border-left: 4px solid #007bff; }\n        .method { font-weight: bold; color: #28a745; }\n        .auth-required { color: #dc3545; font-size: 0.9em; }\n        .public { color: #6c757d; font-size: 0.9em; }\n      </style>\n    </head>\n    <body>\n      <h1>Custom Routes API Documentation</h1>\n\n      <h2>Public Endpoints (No Authentication)</h2>\n      <div class=\"endpoint\">\n        <span class=\"method\">GET</span> <code>/status</code>\n        <div class=\"public\">âœ“ Public - Server health status</div>\n      </div>\n      <div class=\"endpoint\">\n        <span class=\"method\">GET</span> <code>/.well-known/openid-configuration</code>\n        <div class=\"public\">âœ“ Public - OAuth discovery</div>\n      </div>\n\n      <h2>Private Endpoints (Authentication Required)</h2>\n      <div class=\"endpoint\">\n        <span class=\"method\">GET</span> <code>/api/users</code>\n        <div class=\"auth-required\">ðŸ”’ Requires: Bearer token</div>\n      </div>\n      <div class=\"endpoint\">\n        <span class=\"method\">GET</span> <code>/admin</code>\n        <div class=\"auth-required\">ðŸ”’ Requires: admin token</div>\n      </div>\n\n      <h2>Authentication</h2>\n      <p>Use one of these tokens in the Authorization header:</p>\n      <ul>\n        <li><code>Bearer admin-token</code> - Admin access</li>\n        <li><code>Bearer user-token</code> - User access</li>\n      </ul>\n\n      <h2>Examples</h2>\n      <pre>\n# Public endpoint (no auth needed)\ncurl http://localhost:8080/status\n\n# Private endpoint (auth required)\ncurl -H \"Authorization: Bearer user-token\" http://localhost:8080/api/users\n      </pre>\n    </body>\n    </html>\n  `;\n  return c.html(html);\n});\n\n// Public static assets\napp.get(\"/public/*\", async (c) => {\n  // In a real app, you'd serve actual files here\n  return c.json({\n    file: c.req.url,\n    message: \"This would serve static files\",\n    public: true,\n  });\n});\n\n// ===== PRIVATE ROUTES (Authentication Required) =====\n\n// Add custom routes for a REST API\napp.get(\"/api/users\", async (c) => {\n  const auth = await getAuth(c);\n  if (!auth) {\n    return c.json({ error: \"Authentication required\" }, 401);\n  }\n\n  const userList = Array.from(users.values());\n  return c.json({\n    authenticated_as: auth.userId,\n    count: userList.length,\n    role: auth.role,\n    users: userList,\n  });\n});\n\napp.get(\"/api/users/:id\", async (c) => {\n  const auth = await getAuth(c);\n  if (!auth) {\n    return c.json({ error: \"Authentication required\" }, 401);\n  }\n\n  const id = c.req.param(\"id\");\n  const user = users.get(id);\n  if (!user) {\n    return c.json({ error: \"User not found\" }, 404);\n  }\n  return c.json(user);\n});\n\napp.post(\"/api/users\", async (c) => {\n  const auth = await getAuth(c);\n  if (!auth) {\n    return c.json({ error: \"Authentication required\" }, 401);\n  }\n\n  const body = (await c.req.json()) as { email: string; name: string };\n\n  if (!body.name || !body.email) {\n    return c.json({ error: \"Name and email are required\" }, 400);\n  }\n\n  const id = String(users.size + 1);\n  const newUser: User = {\n    email: body.email,\n    id,\n    name: body.name,\n  };\n\n  users.set(id, newUser);\n  return c.json(newUser, 201);\n});\n\napp.put(\"/api/users/:id\", async (c) => {\n  const auth = await getAuth(c);\n  if (!auth) {\n    return c.json({ error: \"Authentication required\" }, 401);\n  }\n\n  const id = c.req.param(\"id\");\n  const user = users.get(id);\n  if (!user) {\n    return c.json({ error: \"User not found\" }, 404);\n  }\n\n  const body = (await c.req.json()) as Partial<User>;\n  const updatedUser = { ...user, ...body, id: user.id };\n  users.set(user.id, updatedUser);\n  return c.json(updatedUser);\n});\n\napp.delete(\"/api/users/:id\", async (c) => {\n  const auth = await getAuth(c);\n  if (!auth) {\n    return c.json({ error: \"Authentication required\" }, 401);\n  }\n\n  const id = c.req.param(\"id\");\n  if (!users.has(id)) {\n    return c.json({ error: \"User not found\" }, 404);\n  }\n\n  users.delete(id);\n  return c.body(null, 204);\n});\n\n// Add a simple admin dashboard - requires admin role\napp.get(\"/admin\", async (c) => {\n  const auth = await getAuth(c);\n  if (!auth) {\n    return c.json({ error: \"Authentication required\" }, 401);\n  }\n\n  // Check for admin role\n  if (auth.role !== \"admin\") {\n    return c.json({ error: \"Admin access required\" }, 403);\n  }\n\n  const html = `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>Admin Dashboard</title>\n      <style>\n        body { font-family: sans-serif; margin: 40px; }\n        h1 { color: #333; }\n        .stats { background: #f0f0f0; padding: 20px; border-radius: 8px; }\n        .stat { margin: 10px 0; }\n      </style>\n    </head>\n    <body>\n      <h1>Admin Dashboard</h1>\n      <div class=\"stats\">\n        <div class=\"stat\">Total Users: ${users.size}</div>\n        <div class=\"stat\">Request Count: ${requestCount}</div>\n        <div class=\"stat\">Server Time: ${new Date().toISOString()}</div>\n      </div>\n      <h2>Users</h2>\n      <ul>\n        ${Array.from(users.values())\n          .map((u) => `<li>${u.name} (${u.email})</li>`)\n          .join(\"\")}\n      </ul>\n    </body>\n    </html>\n  `;\n  return c.html(html);\n});\n\n// Add a webhook endpoint\napp.post(\"/webhook/github\", async (c) => {\n  const auth = await getAuth(c);\n  if (!auth) {\n    return c.json({ error: \"Authentication required\" }, 401);\n  }\n\n  const payload = await c.req.json();\n  const event = c.req.header(\"x-github-event\");\n\n  console.log(`GitHub webhook received: ${event}`, payload);\n\n  // Process webhook (e.g., trigger MCP tools)\n  return c.json({ event, received: true });\n});\n\n// Add a file upload endpoint\napp.post(\"/upload\", async (c) => {\n  const auth = await getAuth(c);\n  if (!auth) {\n    return c.json({ error: \"Authentication required\" }, 401);\n  }\n\n  try {\n    const body = await c.req.text();\n    const size = Buffer.byteLength(body);\n\n    return c.json({\n      message: \"File received\",\n      size: `${size} bytes`,\n    });\n  } catch (error) {\n    return c.json(\n      {\n        error: error instanceof Error ? error.message : \"Upload failed\",\n      },\n      500,\n    );\n  }\n});\n\n// Add middleware-like request counting\napp.get(\"/stats\", async (c) => {\n  const auth = await getAuth(c);\n  if (!auth) {\n    return c.json({ error: \"Authentication required\" }, 401);\n  }\n\n  requestCount++;\n  return c.json({\n    requests: requestCount,\n    timestamp: Date.now(),\n    uptime: process.uptime(),\n  });\n});\n\n// Add MCP tools that can interact with the custom routes\nserver.addTool({\n  description: \"List all users from the REST API\",\n  execute: async () => {\n    const userList = Array.from(users.values());\n    return {\n      content: [\n        {\n          text: `Found ${userList.length} users:\\n${userList\n            .map((u) => `- ${u.name} (${u.email})`)\n            .join(\"\\n\")}`,\n          type: \"text\",\n        },\n      ],\n    };\n  },\n  name: \"list_users\",\n  parameters: z.object({}),\n});\n\nserver.addTool({\n  description: \"Create a new user via the REST API\",\n  execute: async ({ email, name }) => {\n    const id = String(users.size + 1);\n    const newUser: User = { email, id, name };\n    users.set(id, newUser);\n\n    return {\n      content: [\n        {\n          text: `User created successfully:\\nID: ${id}\\nName: ${name}\\nEmail: ${email}`,\n          type: \"text\",\n        },\n      ],\n    };\n  },\n  name: \"create_user\",\n  parameters: z.object({\n    email: z.string().email(),\n    name: z.string(),\n  }),\n});\n\nserver.addTool({\n  description: \"Get server statistics\",\n  execute: async () => {\n    return {\n      content: [\n        {\n          text: `Server Statistics:\n- Total Users: ${users.size}\n- Request Count: ${requestCount}\n- Uptime: ${Math.floor(process.uptime())} seconds\n- Memory Usage: ${Math.round(process.memoryUsage().heapUsed / 1024 / 1024)} MB`,\n          type: \"text\",\n        },\n      ],\n    };\n  },\n  name: \"get_stats\",\n  parameters: z.object({}),\n});\n\n// Add a resource that exposes the user list\nserver.addResource({\n  description: \"Current user database\",\n  load: async () => ({\n    text: JSON.stringify(Array.from(users.values()), null, 2),\n  }),\n  mimeType: \"application/json\",\n  name: \"user-database\",\n  uri: \"resource://users\",\n});\n\n// Start the server\nconst PORT = process.env.FASTMCP_PORT\n  ? parseInt(process.env.FASTMCP_PORT)\n  : 8080;\n\nserver\n  .start({\n    httpStream: { port: PORT },\n    transportType: \"httpStream\",\n  })\n  .then(() => {\n    console.log(`\nðŸš€ Custom Routes Example Server Started!\n\nMCP Endpoint: http://localhost:${PORT}/mcp\nHealth Check: http://localhost:${PORT}/health\n\nPUBLIC ROUTES (No Authentication):\n- Status:       http://localhost:${PORT}/status\n- Docs:         http://localhost:${PORT}/docs\n- OAuth Config: http://localhost:${PORT}/.well-known/openid-configuration\n- Static Files: http://localhost:${PORT}/public/*\n\nPRIVATE ROUTES (Authentication Required):\n- REST API:     http://localhost:${PORT}/api/users\n- Admin Panel:  http://localhost:${PORT}/admin (admin only)\n- Statistics:   http://localhost:${PORT}/stats\n- File Upload:  http://localhost:${PORT}/upload\n- GitHub Hook:  http://localhost:${PORT}/webhook/github\n\nAuthentication:\nUse \"Authorization: Bearer admin-token\" or \"Bearer user-token\"\n\nTry these commands:\n\n# Public routes (no auth needed)\ncurl http://localhost:${PORT}/status\ncurl http://localhost:${PORT}/docs\ncurl http://localhost:${PORT}/.well-known/openid-configuration\n\n# Private routes (auth required)\ncurl -H \"Authorization: Bearer user-token\" http://localhost:${PORT}/api/users\ncurl -H \"Authorization: Bearer admin-token\" http://localhost:${PORT}/admin\ncurl -X POST -H \"Authorization: Bearer user-token\" -H \"Content-Type: application/json\" \\\\\n     -d '{\"name\":\"Charlie\",\"email\":\"charlie@example.com\"}' \\\\\n     http://localhost:${PORT}/api/users\n\n# Test authentication failure\ncurl http://localhost:${PORT}/api/users  # Should return 401\n\nMCP Tools available:\n- list_users\n- create_user  \n- get_stats\n\nTest with MCP Inspector:\nnpx fastmcp inspect src/examples/custom-routes.ts\n  `);\n  })\n  .catch((error) => {\n    console.error(\"Failed to start server:\", error);\n    process.exit(1);\n  });\n"],"mappings":"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","names":[]}